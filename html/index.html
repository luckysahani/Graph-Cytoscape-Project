<!DOCTYPE html>
<html>
	<head>
		<!-- <title></title> -->
		<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
		<script type="text/javascript" src="json2.min.js"></script>
        <script type="text/javascript" src="AC_OETags.min.js"></script>
        <script type="text/javascript" src="cytoscapeweb.min.js"></script>

        <script type="text/javascript">
            window.onload=function() {
                // id of Cytoscape Web container div
                var div_id = "cytoscapeweb";
                
                // you could also use other formats (e.g. GraphML) or grab the network data via AJAX
                var networ_json = {
                    data: {
                        nodes: [ { id: "1" }, { id: "2" } ],
                        edges: [ { id: "2to1", target: "1", source: "2" } ]
                    }
                };
                
                // initialization options
                var options = {
                    // where you have the Cytoscape Web SWF
                    swfPath: "/swf/CytoscapeWeb",
                    // where you have the Flash installer SWF
                    flashInstallerPath: "/swf/playerProductInstall"
                };
                
                // init and draw
                var vis = new org.cytoscapeweb.Visualization(div_id, options);
                vis.draw({ network: networ_json });
            };
        </script>

		<meta content="utf-8" http-equiv="encoding">
		<title>CS252 teri maa ko</title>
		<style type="text/css">
			#center{text-align: center;}
			.center{text-align: center;}
			#input {
			    line-height:30px;
			    background-color:#eeeeee;
			    /*height:300px;*/
			    width:400px;
			    float:left;
			    padding:30px; 
			}
			#output {
			    width:350px;
			    float:left;
			    padding:20px;
			    padding-left: 50px;
			} 

		</style>
		<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
		<script>
			// function loadXMLDoc()
			// {
			// 	$.get( '/create?param=' + document.getElementById("graph_input").value , function(data) {
			// 		console.log(data);
			// 		document.getElementById("graph_input").value=data.data+' and hardik are magoda';

			//     });
			// }
			function create(){
				var str = document.getElementById('graph_input');
				var str1 = $.trim(str.value);
				str1 = str1.split('\n');
				str1 = str1.join('; ');
				$.get( '/create?param1=' +  str1, function(data){
					document.getElementById('graph_output').value=data;
				});
				document.getElementById('graph_input').value = '';
				console.log("create clicked");	
			}

			function check_neighours(){
				var str = document.getElementById('query_input');
				var temp ='temp + \n';
				var str1 = $.trim(str.value);
				$.get( '/query?param1=' +  str1, function(dat1){
				//	console.log(data);
					document.getElementById('graph_output').value=dat1;

					var obj_node = JSON.parse(dat1);
					var div_id = "cytoscapeweb";
                
	            //    you could also use other formats (e.g. GraphML) or grab the network data via AJAX
	            //    var networ_json = '{ "data": { "nodes": ' + dat1.b[0].id + '}}';
	            	console.log(obj_node[0].b.data.Name);
	              	var graph = JSON.parse(networ_json);  
	                // initialization options
	                var options = {
	                    // where you have the Cytoscape Web SWF
	                    swfPath: "/swf/CytoscapeWeb",
	                    // where you have the Flash installer SWF
	                    flashInstallerPath: "/swf/playerProductInstall"
	                };
	                
	              //  init and draw
	                var vis = new org.cytoscapeweb.Visualization(div_id, options);
	                vis.draw({ network: graph });
				});
				document.getElementById('query_input').value = '';
				console.log("check_neighours clicked");	
			}
			</script>


	</head>
	<body>
		<h1 id="center">
			CS252 Project !!!!
		</h1>
		<h2 id ="center">
			<a  href="1.html">Have a look</a>
		</h2>
			<div id="input" style=";">
				<textarea id="graph_input" name="Text1" cols="40" rows="8"></textarea><br>
				<button onclick="create()" value="Send" id='sendData'> Enter the node details with edges </button>
				<textarea id="query_input" name="Text2" cols="40" rows="1"></textarea><br>
				<button onclick="check_neighours()" value="Send" id='sendData' value='Get Neighbour'>Click to check neighours</button>
			</div>
			<div id="output" style="">
				<textarea id="graph_output" name="Text1" cols="80" rows="16"></textarea><br>
			</div>


		</div>
		 <div id="cytoscapeweb">
            Cytoscape Web will replace the contents of this div with your graph.
        </div>
		</body>

</html>